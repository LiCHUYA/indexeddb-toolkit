{"version":3,"file":"indexeddb-toolkit.es5.js","sources":["../src/helper/formatReturn.ts","../src/constant/index.ts","../src/helper/getIndexedDBVersion.ts","../src/helper/getAllDB.ts","../src/helper/isTableExist.ts","../src/helper/closeAllConnections.ts","../src/utils/logger.ts","../src/core/useDatabase.ts","../src/core/database/deleteTable.ts","../src/core/database/deleteDatabase.ts","../src/core/database/deleteAllDatabases.ts","../src/core/database/closeAllConnections.ts","../src/core/database/getTableNames.ts","../src/core/database/deleteAllTables.ts","../src/core/table/createTable.ts","../src/core/table/insertOne.ts","../src/core/table/insertMany.ts","../src/core/table/findDBData.ts","../src/core/table/findByKey.ts","../src/core/table/findByIndex.ts","../src/core/table/deleteOneByPk.ts","../src/core/table/deleteOneByIndex.ts","../src/core/table/deleteManyByPK.ts","../src/core/table/deleteManyByIndex.ts","../src/core/table/updateDataByPrimaryKey.ts","../src/core/table/updateDataByIndex.ts","../src/core/query/QueryBuilder.ts","../src/core/query/createQuery.ts","../src/core/file/saveFilesToDB.ts","../src/core/file/getFileFromDB.ts","../src/core/file/getAllFiles.ts","../src/core/file/downloadFileFromDB.ts","../src/core/file/downloadAllFiles.ts","../src/core/file/revokeFileUrl.ts","../src/core/file/utils.ts","../src/core/migration/migrateData.ts","../src/core/json/exportToJson.ts","../src/core/json/importFromJson.ts","../src/index.ts"],"sourcesContent":["export interface IReturn {\r\n  code: number;\r\n  message: string;\r\n  result: any;\r\n}\r\n\r\nfunction returnFormatter(code: number, message: string, result: any = {}): IReturn {\r\n  return { code, message, result };\r\n}\r\n\r\nexport default returnFormatter;\r\n","import returnFormater from '../helper/formatReturn'\r\n// import { IReturn } from '../types'\r\n\r\nconst ResponseMessages = {\r\n  // 成功\r\n  OPEN_DB_SUCCESS: (data: {}) => returnFormater(200, `数据库打开成功`, data),\r\n  GET_TABLES_SUCCESS: (data = []) => returnFormater(200, '获取指定数据库中的表数量成功', data),\r\n  GET_ALL_DBS_SUCCESS: (res: any) => returnFormater(200, '获取所有数据库成功', res),\r\n  DEL_DB_SUCCESS: (info: any) => returnFormater(200, '删除数据库成功', info),\r\n  DEL_ALL_DB_SUCCESS: () => returnFormater(200, '删除所有数据库成功'),\r\n  \r\n  // 表操作相关\r\n  TB_CREATE_SUCCESS: (data?: any) => returnFormater(200, '表创建成功', {\r\n    ...data,\r\n    timestamp: Date.now()\r\n  }),\r\n\r\n  TB_INSERT_SUCCESS: (data: any) => returnFormater(200, '数据插入成功', {\r\n    insertedId: data.target?.result,\r\n    timestamp: Date.now()\r\n  }),\r\n\r\n  TB_INSERT_MANY_SUCCESS: (info: any) => returnFormater(200, '数据批量插入成功', info),\r\n  TB_SELECT_SUCCESS: (data?: any) => returnFormater(200, '数据查询成功', data),\r\n  TB_DELETE_SUCCESS: (info: any) => returnFormater(200, '表删除成功', info),\r\n  TB_DELETE_ERROR: (info: any) => returnFormater(408, '表删除失败', info),\r\n  TB_DELETE_ALL_SUCCESS: () => returnFormater(200, '所有表删除成功'),\r\n  TB_DELETE_ALL_ERROR: (info: any) => returnFormater(409, '所有表删除失败', info),\r\n  // 错误相关\r\n  DBNAME_IS_NULL: () => returnFormater(401, '数据库名称不能为空'),\r\n  TBNAME_IS_NULL: () => returnFormater(402, '表名不能为空'),\r\n  OPEN_DB_ERROR: (error: Response) => returnFormater(403, '数据库打开失败', error),\r\n  OPEN_TB_ERROR: (error: Response) => returnFormater(405, '表打开失败', error),\r\n  DB_NOTFOUND: () => returnFormater(406, '数据库不存在'),\r\n  DB_DELETE_ERROR: (error: Response) => returnFormater(407, '数据库删除失败', error),\r\n  TB_EXIST: (tableName: string) => returnFormater(406, `表 ${tableName} 已存在`, { tableName }),\r\n  JSON_IMPORT_SUCCESS: (data: any) => returnFormater(200, '数据导入成功', data),\r\n  JSON_IMPORT_ERROR: (error: any) => returnFormater(412, '数据导入失败', error),\r\n  TB_CREATE_ERROR: (error: any) => returnFormater(407, '表创建失败', {\r\n    error: error instanceof Error ? error.message : String(error)\r\n  }),\r\n\r\n  TB_NOTFOUND: (message?: string) => returnFormater(411, message || '表不存在'),\r\n  \r\n  TB_INSERT_ERROR: (error: any) => returnFormater(412, '数据插入失败', {\r\n    error: error instanceof Error ? error.message : String(error)\r\n  }),\r\n  JSON_EXPORT_SUCCESS: (data: any) => returnFormater(200, '数据导出成功', data),\r\n  JSON_EXPORT_ERROR: (error: any) => returnFormater(412, '数据导出失败', error),\r\n  // ... 其他消息保持 returnFormater 格式\r\n  TB_INSERT_MANY_ERROR: (error: Response) => returnFormater(413, '数据批量插入失败', error),\r\n  INSERT_DATA_ERROR: (data: Array<any>) => returnFormater(414, '数据格式不正确', data),\r\n  TB_SELECT_ERROR: (error: any) => returnFormater(415, '数据查询失败', error),\r\n  PRIMARY_KEY_IS_NULL: () => returnFormater(416, '主键不能为空'),\r\n  \r\n  // 基础错误\r\n  BASIC_ERROR: (error: any) => returnFormater(500, '操作失败', {\r\n    error: error instanceof Error ? error.message : error\r\n  }),\r\n\r\n  // 其他所有消息都使用 returnFormater\r\n  DATA_ERROR: (message: string) => returnFormater(404, message),\r\n  \r\n  TB_DELETE_MANY_BY_INDEXS_SUCCESS: (info: any) => returnFormater(200, '批量删除索引数据成功', info),\r\n  TB_DELETE_MANY_BY_INDEXS_ERROR: (error: any) => returnFormater(417, '批量删除索引数据失败', error),\r\n  \r\n  TB_SELECT_INDEX_NAME_IS_NULL: () => returnFormater(418, '索引名称不能为空'),\r\n  TB_SELECT_INDEX_VALUE_IS_NULL: () => returnFormater(419, '索引值不能为空'),\r\n  TB_DELETE_BY_INDEX_SUCCESS: (info: any) => returnFormater(200, '通过索引删除数据成功', info),\r\n  TB_DELETE_BY_INDEX_ERROR: (error: any) => returnFormater(420, '通过索引删除数据失败', error),\r\n  TB_DELETE_BY_PK_SUCCESS: (info: any) => returnFormater(200, '通过主键删除数据成功', info),\r\n  TB_DELETE_BY_PK_ERROR: (error: any) => returnFormater(421, '通过主键删除数据失败', error),\r\n  TB_INDEX_ERROR: () => returnFormater(422, '索引不存在'),\r\n  TB_SELECT_BY_INDEX_SUCCESS: (data: any) => returnFormater(200, '通过索引查询数据成功', data),\r\n  TB_SELECT_BY_INDEX_ERROR: (error: any) => returnFormater(423, '通过索引查询数据失败', error),\r\n  TB_DELETE_RECORDS_BY_KEYS_SUCCESS: (info: any) => returnFormater(200, '批量删除记录成功', info),\r\n  TB_DELETE_RECORDS_BY_KEYS_ERROR: (error: any) => returnFormater(424, '批量删除记录失败', error),\r\n\r\n  // 添加数据迁移相关的消息\r\n  TB_MIGRATE_SUCCESS: (data: any) => ({\r\n    code: 200,\r\n    message: '数据迁移成功',\r\n    result: data\r\n  }),\r\n\r\n  TB_MIGRATE_ERROR: (error: any) => ({\r\n    code: 430,\r\n    message: '数据迁移失败',\r\n    result: error\r\n  }),\r\n\r\n  // 添加文件存储相关的消息\r\n  FILE_SAVE_SUCCESS: (data: any) => ({\r\n    code: 200, \r\n    message: '文件保存成功',\r\n    result: data\r\n  }),\r\n\r\n  FILE_SAVE_ERROR: (error: any) => ({\r\n    code: 436,\r\n    message: '文件保存失败',\r\n    result: error\r\n  }),\r\n\r\n  FILE_GET_SUCCESS: (data: any) => ({\r\n    code: 200,\r\n    message: '获取文件成功', \r\n    result: data\r\n  }),\r\n\r\n  FILE_GET_ERROR: (error: any) => ({\r\n    code: 437,\r\n    message: '获取文件失败',\r\n    result: error\r\n  }),\r\n\r\n  FILE_DELETE_SUCCESS: (data: any) => ({\r\n    code: 200,\r\n    message: '删除文件成功',\r\n    result: data\r\n  }),\r\n\r\n  FILE_DELETE_ERROR: (error: any) => ({\r\n    code: 438,\r\n    message: '删除文件失败', \r\n    result: error\r\n  }),\r\n\r\n  FILE_IS_NULL: () => ({\r\n    success: false,\r\n    code: 40001,\r\n    message: 'File is required'\r\n  }),\r\n\r\n  TB_SELECT_BY_KEY_SUCCESS: (data: any) => returnFormater(200, '通过主键查询数据成功', data),\r\n  TB_SELECT_BY_KEY_ERROR: (error: any) => returnFormater(425, '通过主键查询数据失败', error),\r\n\r\n  TB_DATA_UPDATE_BY_INDEX_SUCCESS: (data: any) => returnFormater(200, '通过索引更新数据成功', data),\r\n  TB_DATA_UPDATE_BY_INDEX_ERROR: (error: any) => returnFormater(426, '通过索引更新数据失败', error),\r\n\r\n  TB_DATA_UPDATE_BY_PRIMARY_KEY_SUCCESS: (data: any) => returnFormater(200, '通过主键更新数据成功', data),\r\n  TB_DATA_UPDATE_BY_PRIMARY_KEY_ERROR: (error: any) => returnFormater(427, '通过主键更新数据失败', error)\r\n};\r\n\r\nexport default ResponseMessages;\r\n","import ResponseMessages from '../constant'\r\n\r\n/**\r\n * 获取指定数据库的版本号\r\n * @param databaseName 数据库名称\r\n * @returns Promise对象，包含数据库的版本号\r\n */\r\nfunction getIndexedDBVersion(databaseName: string): Promise<number> {\r\n  return new Promise<number>((resolve, reject) => {\r\n    if (!databaseName) {\r\n      return ResponseMessages.DBNAME_IS_NULL()\r\n    }\r\n    const request = window.indexedDB.open(databaseName)\r\n    request.onsuccess = function(event: any) {\r\n      const db: any = event.target.result\r\n      const version = db.version\r\n      db.close()\r\n      resolve(version)\r\n    }\r\n    request.onerror = function(event: any) {\r\n      reject(ResponseMessages.BASIC_ERROR(event.target.error))\r\n    }\r\n  })\r\n}\r\n\r\nexport default getIndexedDBVersion\r\n","import ResponseMessages from '../constant'\r\n\r\n/**\r\n * 获取所有数据库实例\r\n * @returns {Promise<{status: number, message: string, data: any[]}>} Promise对象，包含所有数据库实例的数组\r\n */\r\nasync function getAllDB(): Promise<any> {\r\n  try {\r\n    const res = await (indexedDB as any).databases()\r\n    if (Array.isArray(res)) {\r\n      return ResponseMessages.GET_ALL_DBS_SUCCESS(res)\r\n    } else {\r\n      return ResponseMessages.DB_NOTFOUND()\r\n    }\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default getAllDB\r\n","import { useDatabase } from '../core'\r\n\r\n/**\r\n * 判断表是否存在\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @returns 表是否存在的布尔值\r\n */\r\nasync function isTableExist(dbName: string, tableName: string): Promise<boolean> {\r\n  try {\r\n    const db = await useDatabase(dbName);\r\n    return db.objectStoreNames.contains(tableName);\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default isTableExist\r\n","/**\r\n * 关闭所有数据库连接\r\n */\r\nasync function closeAllConnections(): Promise<void> {\r\n  try {\r\n    // 获取当前所有打开的数据库连接\r\n    const databases = await window.indexedDB.databases();\r\n    \r\n    // 关闭每个数据库连接\r\n    for (const db of databases) {\r\n      if (db.name) {\r\n        const request = window.indexedDB.open(db.name);\r\n        request.onsuccess = (event: any) => {\r\n          const database = event.target.result;\r\n          database.close();\r\n        };\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Error closing database connections:', error);\r\n  }\r\n}\r\n\r\nexport default closeAllConnections;","// 判断是否为生产环境的简单方法\r\nconst isProduction = () => {\r\n  try {\r\n    return window.location.hostname !== 'localhost' && \r\n           window.location.hostname !== '127.0.0.1';\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const logger = {\r\n  debug: (...args: any[]) => {\r\n    if (!isProduction()) {\r\n      console.debug('[IndexedDB Toolkit]', ...args);\r\n    }\r\n  },\r\n  error: (...args: any[]) => {\r\n    if (!isProduction()) {\r\n      console.error('[IndexedDB Toolkit]', ...args);\r\n    }\r\n  },\r\n  warn: (...args: any[]) => {\r\n    if (!isProduction()) {\r\n      console.warn('[IndexedDB Toolkit]', ...args);\r\n    }\r\n  }\r\n};","import ResponseMessages from '../constant/index'\r\nimport { getIndexedDBVersion } from '../helper/index'\r\nimport { logger } from '../utils/logger'\r\n\r\ninterface DatabaseResponse {\r\n  type: 'success' | 'error'\r\n  data: IDBDatabase\r\n  message: string\r\n}\r\n\r\n/**\r\n * 使用指定的数据库\r\n *\r\n * @param {string} dbName - 数据库名称\r\n * @param {number} [version] - 可选的版本号\r\n * @returns {Promise<IDBDatabase>} Promise对象，返回数据库实例\r\n * @throws {Error} 当数据库操作失败时抛出错误\r\n */\r\nfunction useDatabase(dbName: string, version?: number): Promise<IDBDatabase> {\r\n  if (!dbName) {\r\n    throw new Error(ResponseMessages.DBNAME_IS_NULL().message)\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const handleSuccess = (event: IDBVersionChangeEvent | Event) => {\r\n      const target = event.target as IDBOpenDBRequest\r\n      resolve(target.result)\r\n    }\r\n\r\n    const handleVersionError = async (dbName: string, error: any) => {\r\n      try {\r\n        // 获取已存在的数据库连接\r\n        const existingDB = (error.target as any)?.result\r\n        if (existingDB) {\r\n          const currentVersion = existingDB.version\r\n          existingDB.close()\r\n          \r\n          // 使用更高的版本号重新打开数据库\r\n          const newVersion = version || (currentVersion + 1)\r\n          logger.debug(`Upgrading database ${dbName} from version ${currentVersion} to ${newVersion}`)\r\n          \r\n          const newRequest = window.indexedDB.open(dbName, newVersion)\r\n          newRequest.onsuccess = handleSuccess\r\n          newRequest.onerror = (event: Event) => {\r\n            const target = event.target as IDBOpenDBRequest\r\n            reject(target.error)\r\n          }\r\n          newRequest.onupgradeneeded = (event) => {\r\n            logger.debug(`Database ${dbName} upgrade needed to version ${newVersion}`)\r\n            handleSuccess(event)\r\n          }\r\n          return\r\n        }\r\n\r\n        // 如果没有现有连接，获取新版本并递增\r\n        const currentVersion = await getIndexedDBVersion(dbName)\r\n        const newVersion = version || (currentVersion + 1)\r\n        logger.debug(`Opening database ${dbName} with new version ${newVersion}`)\r\n        \r\n        const newRequest = window.indexedDB.open(dbName, newVersion)\r\n        newRequest.onsuccess = handleSuccess\r\n        newRequest.onerror = (event: Event) => {\r\n          const target = event.target as IDBOpenDBRequest\r\n          reject(target.error)\r\n        }\r\n        newRequest.onupgradeneeded = (event) => {\r\n          logger.debug(`Database ${dbName} upgrade needed to version ${newVersion}`)\r\n          handleSuccess(event)\r\n        }\r\n      } catch (error) {\r\n        logger.error(`Error handling version change for database ${dbName}:`, error)\r\n        reject(error)\r\n      }\r\n    }\r\n\r\n    // 首次尝试打开数据库\r\n    const initialRequest = window.indexedDB.open(dbName, version)\r\n\r\n    initialRequest.onsuccess = handleSuccess\r\n\r\n    initialRequest.onerror = (event: Event) => {\r\n      const target = event.target as IDBOpenDBRequest\r\n      const error = target.error\r\n\r\n      if (error?.name === 'VersionError') {\r\n        handleVersionError(dbName, error)\r\n      } else {\r\n        logger.error(`Error opening database ${dbName}:`, error)\r\n        reject(error)\r\n      }\r\n    }\r\n\r\n    initialRequest.onupgradeneeded = (event) => {\r\n      logger.debug(`Database ${dbName} upgrade needed to version ${version}`)\r\n      handleSuccess(event)\r\n    }\r\n  })\r\n}\r\n\r\nexport default useDatabase","import ResponseMessages from '../../constant'\r\n\r\n/**\r\n * 删除指定表\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nfunction deleteTable(dbName: string, tableName: string): Promise<any> {\r\n  return new Promise<any>((resolve, reject) => {\r\n    const request = window.indexedDB.open(dbName)\r\n\r\n    request.onsuccess = (event: any) => {\r\n      const db = event.target.result\r\n      const version = db.version + 1\r\n\r\n      db.close()\r\n\r\n      const deleteRequest = window.indexedDB.open(dbName, version)\r\n\r\n      deleteRequest.onupgradeneeded = (event: any) => {\r\n        const upgradeDb = event.target.result\r\n        if (upgradeDb.objectStoreNames.contains(tableName)) {\r\n          upgradeDb.deleteObjectStore(tableName)\r\n        }\r\n      }\r\n\r\n      deleteRequest.onsuccess = (event: any) => {\r\n        event.target.result.close()\r\n        resolve(ResponseMessages.TB_DELETE_SUCCESS(`${tableName} 表删除成功`) as any)\r\n      }\r\n\r\n      deleteRequest.onerror = (event: any) => {\r\n        reject(ResponseMessages.TB_DELETE_ERROR(event))\r\n      }\r\n    }\r\n\r\n    request.onerror = (error: any) => {\r\n      reject(ResponseMessages.BASIC_ERROR(error))\r\n    }\r\n  })\r\n}\r\n\r\nexport default deleteTable\r\n","import ResponseMessages from '../../constant'\r\n\r\n/**\r\n * 删除指定数据库\r\n * @param dbName 数据库名称\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nfunction deleteDatabase(dbName: string): Promise<any> {\r\n  return new Promise<any>((resolve, reject) => {\r\n    const request = window.indexedDB.deleteDatabase(dbName)\r\n\r\n    request.onsuccess = (event: Event) => {\r\n      resolve(ResponseMessages.DEL_DB_SUCCESS(event))\r\n    }\r\n\r\n    request.onerror = (event: any) => {\r\n      reject(ResponseMessages.DB_DELETE_ERROR(event.target.error))\r\n    }\r\n  })\r\n}\r\nexport default deleteDatabase\r\n","import ResponseMessages from '../../constant'\r\nimport deleteDatabase from '../database/deleteDatabase'\r\nimport { getAllDB } from '../../helper/index'\r\n\r\n/**\r\n * 删除所有数据库\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n * @example\r\n * 该方法请慎重使用。\r\n */\r\nasync function deleteAllDatabases(): Promise<any> {\r\n  try {\r\n    const allDatabasesResponse = await getAllDB()\r\n    if (allDatabasesResponse.result.length > 0) {\r\n      const deletePromises = allDatabasesResponse.result.map((db: any) => deleteDatabase(db.name))\r\n      await Promise.all(deletePromises)\r\n      return ResponseMessages.DEL_ALL_DB_SUCCESS()\r\n    } else {\r\n      return ResponseMessages.DB_NOTFOUND()\r\n    }\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default deleteAllDatabases\r\n","/**\r\n * 关闭所有数据库连接\r\n */\r\nasync function closeAllConnections(): Promise<void> {\r\n  // 获取当前所有打开的数据库连接\r\n  const databases = await window.indexedDB.databases?.() || [];\r\n  \r\n  // 关闭每个数据库连接\r\n  databases.forEach((db: any) => {\r\n    if (db.name) {\r\n      const request = window.indexedDB.open(db.name);\r\n      request.onsuccess = (event: any) => {\r\n        const db = event.target.result;\r\n        db.close();\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nexport default closeAllConnections; ","import ResponseMessages from '../../constant'\r\nimport useDatabase from '../useDatabase'\r\n\r\n/**\r\n * 获取指定数据库中的表数量\r\n * @param dbName 数据库名称\r\n * @returns Promise对象，包含表名称数组\r\n */\r\nasync function getTableNames(dbName: string): Promise<any> {\r\n  // 检查数据库名称是否为空\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL();\r\n  }\r\n\r\n  try {\r\n    // 获取数据库对象\r\n    const db = await useDatabase(dbName);\r\n    // 将对象存储名称列表转换为数组\r\n    const objectStoreNames = Array.from(db.objectStoreNames);\r\n\r\n    // 根据对象存储名称列表的长度返回相应的消息\r\n    if (objectStoreNames.length === 0) {\r\n      return ResponseMessages.GET_TABLES_SUCCESS();\r\n    } else {\r\n      return ResponseMessages.GET_TABLES_SUCCESS(objectStoreNames as any);\r\n    }\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error);\r\n  }\r\n}\r\n\r\nexport default getTableNames\r\n","import { useDatabase,deleteTable } from '../index'\r\n\r\n/**\r\n * 删除所有表\r\n * @param dbName 数据库名称\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nasync function deleteAllTables(dbName: string): Promise<any> {\r\n  const database: any = await useDatabase(dbName)\r\n  let currentDb = database.result.target.result\r\n  const objectStoreNames = Array.from(currentDb?.objectStoreNames ?? [])\r\n\r\n  const deletePromises = objectStoreNames.map((tableName: any) =>\r\n    deleteTable(dbName, tableName)\r\n  )\r\n\r\n  return Promise.all(deletePromises)\r\n}\r\n\r\nexport default deleteAllTables\r\n","import ResponseMessages from '../../constant'\r\nimport { useDatabase } from '../index'\r\nimport { logger } from '../../utils/logger'\r\nimport { isTableExist, closeAllConnections } from '../../helper'\r\n\r\n/**\r\n * 索引类型枚举\r\n */\r\nexport enum IndexType {\r\n  UNIQUE = 'unique',      // 唯一索引\r\n  MULTI_ENTRY = 'multi',  // 多值索引\r\n  NORMAL = 'normal'       // 普通索引\r\n}\r\n\r\n/**\r\n * 索引配置接口\r\n */\r\ninterface IndexConfig {\r\n  name: string           // 索引字段名\r\n  type: IndexType        // 索引类型\r\n}\r\n\r\n/**\r\n * 表配置选项\r\n */\r\ninterface TableOptions {\r\n  primaryKey?: string                // 主键字段，默认 'id'\r\n  autoIncrement?: boolean            // 是否自增，默认 true\r\n  version?: number                   // 数据库版本号\r\n  indexes?: Array<string | IndexConfig>  // 支持字符串数组或配置数组\r\n  timeout?: number     // 超时时间,默认3000ms\r\n  force?: boolean      // 是否强制创建,默认true\r\n}\r\n\r\n/**\r\n * 创建数据库表\r\n * @description \r\n * 创建一个新的 IndexedDB 对象仓库并配置索引。\r\n * 支持唯一索引和多值索引。\r\n * \r\n * @example\r\n * ```typescript\r\n * // 创建用户表 - 简单方式\r\n * await createTable('myDB', 'users', {\r\n *   primaryKey: 'userId',\r\n *   indexes: ['email', 'name', 'tags'] // 默认为普通索引\r\n * })\r\n * \r\n * // 创建用户表 - 高级配置\r\n * await createTable('myDB', 'users', {\r\n *   primaryKey: 'userId',\r\n *   indexes: [\r\n *     'name',                          // 普通索引\r\n *     { \r\n *       name: 'email',\r\n *       type: IndexType.UNIQUE         // 唯一索引\r\n *     },\r\n *     {\r\n *       name: 'tags',\r\n *       type: IndexType.MULTI_ENTRY    // 多值索引，用于数组字段\r\n *     }\r\n *   ]\r\n * })\r\n * ```\r\n */\r\nasync function createTable(\r\n  dbName: string,\r\n  tableName: string,\r\n  options: TableOptions = {}\r\n): Promise<any> {\r\n  try {\r\n    const {\r\n      primaryKey = 'id',\r\n      autoIncrement = true,\r\n      indexes = [],\r\n      timeout = 3000,\r\n      force = true\r\n    } = options\r\n\r\n    // 参数验证\r\n    if (!dbName) return ResponseMessages.DBNAME_IS_NULL()\r\n    if (!tableName) return ResponseMessages.TBNAME_IS_NULL()\r\n\r\n    // 检查表是否存在\r\n    const exists = await isTableExist(dbName, tableName)\r\n    if (exists) return ResponseMessages.TB_EXIST(tableName)\r\n\r\n    // 获取数据库连接\r\n    const db = await useDatabase(dbName)\r\n    const newVersion = db.version + 1\r\n    db.close()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const openRequest = window.indexedDB.open(dbName, newVersion)\r\n      let timeoutId: any\r\n\r\n      // 设置超时处理\r\n      if (timeout > 0) {\r\n        timeoutId = setTimeout(async () => {\r\n          if (force) {\r\n            try {\r\n              await closeAllConnections()\r\n              const retryRequest = window.indexedDB.open(dbName, newVersion)\r\n              setupHandlers(retryRequest)\r\n            } catch (err) {\r\n              reject(ResponseMessages.TB_CREATE_ERROR(err))\r\n            }\r\n          } else {\r\n            reject(ResponseMessages.TB_CREATE_ERROR('创建表超时'))\r\n          }\r\n        }, timeout)\r\n      }\r\n\r\n      const setupHandlers = (request: IDBOpenDBRequest) => {\r\n        request.onblocked = () => {\r\n          logger.warn('数据库升级被阻塞 - 等待其他连接关闭')\r\n          // 阻塞时不立即失败,等待超时或强制处理\r\n        }\r\n\r\n        request.onupgradeneeded = (event: any) => {\r\n          clearTimeout(timeoutId)\r\n          const database = event.target.result\r\n          try {\r\n            const store = database.createObjectStore(tableName, {\r\n              keyPath: primaryKey,\r\n              autoIncrement\r\n            })\r\n\r\n            indexes.forEach(index => {\r\n              const indexConfig: IDBIndexParameters = {}\r\n\r\n              if (typeof index === 'string') {\r\n                store.createIndex(index, index, indexConfig)\r\n                logger.debug(`创建普通索引: ${index}`)\r\n              } else {\r\n                switch (index.type) {\r\n                  case IndexType.UNIQUE:\r\n                    indexConfig.unique = true\r\n                    break\r\n                  case IndexType.MULTI_ENTRY:\r\n                    indexConfig.multiEntry = true\r\n                    break\r\n                  case IndexType.NORMAL:\r\n                    break\r\n                }\r\n\r\n                store.createIndex(index.name, index.name, indexConfig)\r\n                logger.debug(`创建${index.type}索引: ${index.name}`)\r\n              }\r\n            })\r\n\r\n            logger.debug(`表 ${tableName} 创建成功，共创建 ${indexes.length} 个索引`)\r\n          } catch (error) {\r\n            logger.error(`创建表 ${tableName} 失败:`, error)\r\n            reject(ResponseMessages.TB_CREATE_ERROR(error))\r\n          }\r\n        }\r\n\r\n        request.onsuccess = (event: any) => {\r\n          clearTimeout(timeoutId)\r\n          const database = event.target.result\r\n          database.close()\r\n          resolve(ResponseMessages.TB_CREATE_SUCCESS())\r\n        }\r\n\r\n        request.onerror = (event: any) => {\r\n          clearTimeout(timeoutId)\r\n          logger.error('创建表失败:', event.target.error)\r\n          reject(ResponseMessages.TB_CREATE_ERROR(event.target.error))\r\n        }\r\n      }\r\n\r\n      setupHandlers(openRequest)\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('创建表失败:', error)\r\n    return ResponseMessages.TB_CREATE_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default createTable\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n// 插入一条数据到指定表\r\nasync function insertOne<T extends object>(\r\n  dbName: string, \r\n  tableName: string, \r\n  data: T\r\n): Promise<any> {\r\n  // 检查数据库名称是否为空\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n\r\n  // 检查表是否存在\r\n  const tableExist = await isTableExist(dbName, tableName)\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_NOTFOUND()\r\n  }\r\n\r\n  // 使用指定的数据库\r\n  const db = await useDatabase(dbName)\r\n\r\n  // 返回一个新的Promise\r\n  return new Promise<any>((resolve, reject) => {\r\n    // 开启一个读写事务\r\n    const transaction = db.transaction([tableName], 'readwrite')\r\n    const store = transaction.objectStore(tableName)\r\n\r\n    // 获取主键名\r\n    const keyPath = store.keyPath as string\r\n    \r\n    // 如果数据中没有主键，且是自增主键，则不添加id\r\n    // 如果数据中没有主键，且不是自增主键，则添加id\r\n    let finalData: T\r\n    if (!(keyPath in data)) {\r\n      if (!store.autoIncrement) {\r\n        finalData = { \r\n          [keyPath]: Date.now(),\r\n          ...data \r\n        } as T\r\n      } else {\r\n        finalData = data\r\n      }\r\n    } else {\r\n      finalData = data\r\n    }\r\n\r\n    // 添加数据\r\n    const request = store.add(finalData)\r\n\r\n    // 成功时的处理\r\n    request.onsuccess = (event: any) => {\r\n      resolve(ResponseMessages.TB_INSERT_SUCCESS(event))\r\n    }\r\n\r\n    // 失败时的处理\r\n    request.onerror = (event: any) => {\r\n      reject(ResponseMessages.TB_INSERT_ERROR(event))\r\n    }\r\n  })\r\n}\r\n\r\nexport default insertOne\r\n","import { useDatabase } from '../index'\r\nimport ResponseMessages from '../../constant'\r\n// import { any } from './types'\r\n\r\n/**\r\n * 批量插入数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名\r\n * @param data 要插入的数据数组\r\n * @param options 插入选项\r\n * @returns Promise<any>\r\n */\r\nexport async function insertMany(\r\n  dbName: string,\r\n  tableName: string,\r\n  data: any[],\r\n  options: {\r\n    skipDuplicates?: boolean;  // 是否跳过重复键\r\n    updateDuplicates?: boolean;  // 是否更新重复键\r\n  } = {}\r\n): Promise<any> {\r\n  const result: any = {\r\n    success: true,\r\n    inserted: 0,\r\n    failed: 0,\r\n    errors: []\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName)\r\n    const transaction = db.transaction([tableName], 'readwrite')\r\n    const store = transaction.objectStore(tableName)\r\n\r\n    // 使用Promise.all处理所有插入操作\r\n    await Promise.all(data.map(async (item) => {\r\n      try {\r\n        // 获取主键名\r\n        const keyPath = store.keyPath as string;\r\n\r\n        // 如果数据中没有主键，且是自增主键，则不添加id\r\n        // 如果数据中没有主键，且不是自增主键，则添加id\r\n        let finalData: any;\r\n        if (!(keyPath in item)) {\r\n          if (!store.autoIncrement) {\r\n            finalData = { \r\n              [keyPath]: Date.now(),\r\n              ...item \r\n            };\r\n          } else {\r\n            finalData = item;\r\n          }\r\n        } else {\r\n          finalData = item;\r\n        }\r\n\r\n        if (options.updateDuplicates) {\r\n          // 如果选择更新重复项，使用put\r\n          await new Promise((resolve, reject) => {\r\n            const request = store.put(finalData)\r\n            request.onsuccess = () => resolve(undefined)\r\n            request.onerror = () => reject(request.error)\r\n          })\r\n        } else {\r\n          // 否则使用add，可能会抛出重复键错误\r\n          await new Promise((resolve, reject) => {\r\n            const request = store.add(finalData)\r\n            request.onsuccess = () => resolve(undefined)\r\n            request.onerror = (event) => {\r\n              const error = request.error\r\n              if (error?.name === 'ConstraintError' && options.skipDuplicates) {\r\n                // 如果是重复键错误且设置了跳过重复，则忽略错误\r\n                resolve(undefined)\r\n              } else {\r\n                reject(error)\r\n              }\r\n            }\r\n          })\r\n        }\r\n        result.inserted++\r\n      } catch (error) {\r\n        result.failed++\r\n        result.errors.push({\r\n          item,\r\n          error: error instanceof Error ? error.message : String(error)\r\n        })\r\n        if (!options.skipDuplicates && !options.updateDuplicates) {\r\n          throw error // 如果没有设置跳过或更新重复项，则抛出错误\r\n        }\r\n      }\r\n    }))\r\n\r\n    return ResponseMessages.TB_INSERT_SUCCESS(result)\r\n  } catch (error) {\r\n    result.success = false\r\n    return ResponseMessages.TB_INSERT_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default insertMany\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface TableData {\r\n  tableName: string\r\n  version: string | number\r\n  children: any\r\n}\r\n\r\n/**\r\n * 查询指定数据库中的数据，如果提供了表名，则查询该表的数据；如果未提供表名，则查询所有表的数据。\r\n * @async\r\n * @param {string} dbName - 数据库名称\r\n * @param {string} [tableName] - 可选，表名。如果提供了表名，则查询该表的数据；如果未提供表名，则查询所有表的数据\r\n * @returns {Promise<TableData[] | IReturn>} 返回包含查询结果的Promise对象\r\n */\r\nasync function findDBData(dbName: string, tableName?: string): Promise<TableData[] | any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n\r\n  try {\r\n    const database = await useDatabase(dbName)\r\n    const result: TableData[] = []\r\n\r\n    // 查询单个表数据的函数\r\n    const queryTableData = async (storeName: string): Promise<TableData | null> => {\r\n      try {\r\n        const transaction = database.transaction([storeName], 'readonly')\r\n        const store = transaction.objectStore(storeName)\r\n\r\n        const data = await new Promise((resolve, reject) => {\r\n          const request = store.getAll()\r\n          request.onsuccess = () => resolve(request.result)\r\n          request.onerror = (event) => reject(event)\r\n        })\r\n\r\n        return {\r\n          tableName: storeName,\r\n          version: database.version || '',\r\n          children: ResponseMessages.TB_SELECT_SUCCESS(data)\r\n        }\r\n      } catch (error) {\r\n        logger.error(`查询表 ${storeName} 数据失败:`, error)\r\n        return null\r\n      }\r\n    }\r\n\r\n    // 查询单个表的数据\r\n    if (tableName) {\r\n      const tableExist = await isTableExist(dbName, tableName)\r\n      if (!tableExist) {\r\n        return ResponseMessages.TB_NOTFOUND()\r\n      }\r\n\r\n      const tableData = await queryTableData(tableName)\r\n      if (tableData) {\r\n        result.push(tableData)\r\n      }\r\n      return result\r\n    }\r\n\r\n    // 查询所有表的数据\r\n    const objectStoreNames = Array.from(database.objectStoreNames || [])\r\n    if (objectStoreNames.length === 0) {\r\n      return []\r\n    }\r\n\r\n    // 并行查询所有表的数据\r\n    const tableDataPromises = objectStoreNames.map(async (storeName) => {\r\n      if (!database.objectStoreNames.contains(storeName)) {\r\n        logger.warn(`表 ${storeName} 不存在`)\r\n        return null\r\n      }\r\n      return queryTableData(storeName)\r\n    })\r\n\r\n    const tableDataResults = await Promise.all(tableDataPromises)\r\n    \r\n    // 过滤掉查询失败的表数据\r\n    result.push(...tableDataResults.filter((data): data is TableData => data !== null))\r\n\r\n    return result\r\n\r\n  } catch (error) {\r\n    logger.error('查询数据库数据失败:', error)\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default findDBData","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n// import {ExportConverter} from \"typedoc/dist/lib/converter/nodes\";\r\n\r\n/**\r\n * 根据主键查询数据或查询所有数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param key 主键值\r\n * @param isAll 是否查询所有数据，默认为 true\r\n * @returns Promise对象，包含查询结果对象\r\n */\r\nasync function findByKey(\r\n  dbName: string,\r\n  tableName: string,\r\n  key: any,\r\n  isAll: boolean = true\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL()\r\n  }\r\n  if (!key && !isAll) {\r\n    return ResponseMessages.PRIMARY_KEY_IS_NULL()\r\n  }\r\n  try {\r\n    const tableExist = await isTableExist(dbName, tableName)\r\n    if (!tableExist) {\r\n      return ResponseMessages.TB_NOTFOUND()\r\n    }\r\n    const db = await useDatabase(dbName)\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction(tableName, 'readonly').objectStore(tableName)\r\n\r\n      if (isAll) {\r\n        const request = store.getAll()\r\n        request.onsuccess = (event: any) => {\r\n          const result = event.target.result\r\n          resolve(ResponseMessages.TB_SELECT_BY_KEY_SUCCESS(result))\r\n        }\r\n        request.onerror = (event: any) => {\r\n          reject(ResponseMessages.TB_SELECT_BY_KEY_ERROR(event))\r\n        }\r\n      } else {\r\n        const request = store.get(key)\r\n        request.onsuccess = (event: any) => {\r\n          const result = event.target.result\r\n          resolve(ResponseMessages.TB_SELECT_BY_KEY_SUCCESS(result))\r\n        }\r\n        request.onerror = (event: any) => {\r\n          reject(ResponseMessages.TB_SELECT_BY_KEY_ERROR(event))\r\n        }\r\n      }\r\n    })\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default findByKey\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据索引查询数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param indexName 索引名称\r\n * @param indexValue 索引值\r\n * @param isAll 根据索引查询出来的值,查出来全部值还是默认第一条\r\n * @returns Promise对象，包含查询结果对象\r\n */\r\nasync function findByIndex(\r\n  dbName: string,\r\n  tableName: string,\r\n  indexName: string,\r\n  indexValue: any,\r\n  isAll: boolean = true\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL()\r\n  }\r\n\r\n  if (!indexName) {\r\n    return ResponseMessages.TB_SELECT_INDEX_NAME_IS_NULL()\r\n  }\r\n\r\n  if (!indexValue) {\r\n    return ResponseMessages.TB_SELECT_INDEX_VALUE_IS_NULL()\r\n  }\r\n  try {\r\n    const tableExist = await isTableExist(dbName, tableName)\r\n    if (!tableExist) {\r\n      return ResponseMessages.TB_EXIST(`${tableName} 表不存在`)\r\n    }\r\n    const db = await useDatabase(dbName)\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction(tableName, 'readonly').objectStore(tableName)\r\n\r\n      if (!Array.from(store.indexNames).includes(indexName))\r\n        reject(ResponseMessages.TB_INDEX_ERROR())\r\n\r\n      const index = store.index(indexName)\r\n\r\n      if (isAll) {\r\n        const request = index.openCursor(IDBKeyRange.only(indexValue))\r\n        const results: any[] = []\r\n\r\n        request.onsuccess = (event: any) => {\r\n          const cursor = event.target.result\r\n          if (cursor) {\r\n            results.push(cursor.value)\r\n            cursor.continue()\r\n          } else {\r\n            resolve(ResponseMessages.TB_SELECT_BY_INDEX_SUCCESS(results))\r\n          }\r\n        }\r\n\r\n        request.onerror = (event: any) => {\r\n          reject(ResponseMessages.TB_SELECT_BY_INDEX_ERROR(event))\r\n        }\r\n      } else {\r\n        const request = index.get(indexValue)\r\n        request.onsuccess = (event: any) => {\r\n          const result = event.target.result\r\n          resolve(ResponseMessages.TB_SELECT_BY_INDEX_SUCCESS(result))\r\n        }\r\n\r\n        request.onerror = (event: any) => {\r\n          reject(ResponseMessages.TB_SELECT_BY_INDEX_ERROR(event))\r\n        }\r\n      }\r\n    })\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default findByIndex\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据主键删除单条数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param id 主键值\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nasync function deleteOneByPk(dbName: string, tableName: string, id: number) {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL()\r\n  }\r\n  const tableExist = await isTableExist(dbName, tableName)\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_EXIST(`${tableName} 表不存在`)\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName)\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction([tableName], 'readwrite').objectStore(tableName)\r\n\r\n      const request = store.delete(id)\r\n      request.onsuccess = (event: any) => {\r\n        resolve(ResponseMessages.TB_DELETE_BY_PK_SUCCESS(event))\r\n      }\r\n      request.onerror = (event: any) => {\r\n        reject(ResponseMessages.TB_DELETE_BY_PK_ERROR(event))\r\n      }\r\n    })\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default deleteOneByPk\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据索引删除单条数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param indexName 索引名称\r\n * @param indexValue 索引值\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nasync function deleteOneByIndex(\r\n  dbName: string,\r\n  tableName: string,\r\n  indexName: string,\r\n  indexValue: any\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL()\r\n  }\r\n  if (!indexName) {\r\n    return ResponseMessages.TB_SELECT_INDEX_NAME_IS_NULL()\r\n  }\r\n  if (!indexValue) {\r\n    return ResponseMessages.TB_SELECT_INDEX_VALUE_IS_NULL()\r\n  }\r\n\r\n  const tableExist = await isTableExist(dbName, tableName)\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_EXIST(`${tableName} 表不存在`)\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName)\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const transaction = db.transaction([tableName], 'readwrite')\r\n      const store = transaction.objectStore(tableName)\r\n      const index = store.index(indexName)\r\n\r\n      const request = index.openCursor(IDBKeyRange.only(indexValue))\r\n      request.onsuccess = (event: any) => {\r\n        const cursor = event.target.result\r\n        if (cursor) {\r\n          const deleteRequest = cursor.delete()\r\n          deleteRequest.onsuccess = () => {\r\n            resolve(ResponseMessages.TB_DELETE_BY_INDEX_SUCCESS({ id: cursor.primaryKey }))\r\n          }\r\n          deleteRequest.onerror = (event: any) => {\r\n            reject(ResponseMessages.TB_DELETE_BY_INDEX_ERROR(event))\r\n          }\r\n        } else {\r\n          resolve(ResponseMessages.TB_DELETE_BY_INDEX_SUCCESS(null))\r\n        }\r\n      }\r\n\r\n      request.onerror = (event: any) => {\r\n        reject(ResponseMessages.TB_DELETE_BY_INDEX_ERROR(event))\r\n      }\r\n    })\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default deleteOneByIndex\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据主键数组批量删除数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param keys 主键值数组\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nasync function deleteManyByPK(dbName: string, tableName: string, keys: any[]): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL()\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL()\r\n  }\r\n  if (!keys || keys.length === 0) {\r\n    return ResponseMessages.PRIMARY_KEY_IS_NULL()\r\n  }\r\n\r\n  const tableExist = await isTableExist(dbName, tableName)\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_NOTFOUND()\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName)\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction([tableName], 'readwrite').objectStore(tableName)\r\n\r\n      const deletePromises = keys.map(key => {\r\n        return new Promise<void>((resolve, reject) => {\r\n          const request = store.delete(key)\r\n          request.onsuccess = () => resolve()\r\n          request.onerror = (event: any) =>\r\n            reject(ResponseMessages.TB_DELETE_BY_PK_ERROR(event.target.error))\r\n        })\r\n      })\r\n\r\n      Promise.all(deletePromises)\r\n        .then(() =>\r\n          resolve(\r\n            ResponseMessages.TB_DELETE_BY_PK_SUCCESS(`${keys.length} 条数据删除成功`)\r\n          )\r\n        )\r\n        .catch(error => reject(ResponseMessages.TB_DELETE_BY_PK_ERROR(error)))\r\n    })\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default deleteManyByPK\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据索引批量删除数据\r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @param indexName 索引名称\r\n * @param indexValues 索引值数组\r\n * @returns Promise对象，包含删除结果的状态和消息\r\n */\r\nasync function deleteManyByIndex(\r\n  dbName: string,\r\n  tableName: string,\r\n  indexName: string,\r\n  indexValues: any[]\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL();\r\n  }\r\n  if (!tableName) {\r\n    return ResponseMessages.TBNAME_IS_NULL();\r\n  }\r\n  const tableExist = await isTableExist(dbName, tableName);\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_EXIST(`${tableName} 表不存在`);\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName);\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction([tableName], 'readwrite').objectStore(tableName);\r\n      const index = store.index(indexName);\r\n\r\n      const deletePromises = indexValues.map(value => {\r\n        return new Promise<any>((resolve, reject) => {\r\n          const request = index.openCursor(IDBKeyRange.only(value));\r\n          request.onsuccess = (event: any) => {\r\n            const cursor = event.target.result;\r\n            if (cursor) {\r\n              const deleteRequest = cursor.delete();\r\n              deleteRequest.onsuccess = () => {\r\n                cursor.continue();\r\n                resolve(true);\r\n              };\r\n              deleteRequest.onerror = (event: any) =>\r\n                reject({\r\n                  code: 400,\r\n                  message: event.target.error\r\n                });\r\n            } else {\r\n              resolve(true);\r\n            }\r\n          };\r\n          request.onerror = (event: any) =>\r\n            reject({\r\n              code: 400,\r\n              message: event.target.error\r\n            });\r\n        });\r\n      });\r\n\r\n      Promise.all(deletePromises)\r\n        .then(() =>\r\n          resolve(\r\n            ResponseMessages.TB_DELETE_MANY_BY_INDEXS_SUCCESS(\r\n              `${indexValues.length} 条数据删除成功`\r\n            )\r\n          )\r\n        )\r\n        .catch(error => reject(ResponseMessages.TB_DELETE_MANY_BY_INDEXS_ERROR(error)));\r\n    });\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error);\r\n  }\r\n}\r\n\r\nexport default deleteManyByIndex\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 更新指定主键的数据\r\n * @param dbName 数据库名称\r\n * @param tbName 表名称\r\n * @param id 主键值\r\n * @param data 更新的数据\r\n * @returns Promise对象，包含更新结果\r\n */\r\nasync function updateDataByPrimaryKey<T extends { [key: string]: any }>(\r\n  dbName: string,\r\n  tbName: string,\r\n  id: number,\r\n  data: Partial<T>\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL();\r\n  }\r\n  if (!id) {\r\n    return ResponseMessages.PRIMARY_KEY_IS_NULL();\r\n  }\r\n\r\n  const tableExist = await isTableExist(dbName, tbName);\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_NOTFOUND(`${tbName} 表不存在` as any);\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName);\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction([tbName], 'readwrite').objectStore(tbName);\r\n      const request = store.get(id);\r\n\r\n      request.onsuccess = (event: Event) => {\r\n        const target = event.target as IDBRequest;\r\n        const item = target.result;\r\n        \r\n        if (item) {\r\n          const updatedItem = { ...item, ...data };\r\n          const updateRequest = store.put(updatedItem);\r\n\r\n          updateRequest.onsuccess = (event: Event) => {\r\n            resolve(ResponseMessages.TB_DATA_UPDATE_BY_PRIMARY_KEY_SUCCESS(event));\r\n          };\r\n\r\n          updateRequest.onerror = (event: Event) => {\r\n            reject(ResponseMessages.TB_DATA_UPDATE_BY_PRIMARY_KEY_ERROR(event));\r\n          };\r\n        } else {\r\n          reject(ResponseMessages.DATA_ERROR('找不到数据'));\r\n        }\r\n      };\r\n\r\n      request.onerror = (event: Event) => {\r\n        reject(ResponseMessages.TB_DATA_UPDATE_BY_PRIMARY_KEY_ERROR(event));\r\n      };\r\n    });\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error);\r\n  }\r\n}\r\n\r\nexport default updateDataByPrimaryKey;\r\n","import ResponseMessages from '../../constant'\r\nimport { isTableExist } from '../../helper'\r\nimport { useDatabase } from '../index'\r\n\r\n/**\r\n * 根据索引更新数据\r\n * @param dbName 数据库名称\r\n * @param tbName 表名称\r\n * @param indexName 索引名称\r\n * @param indexValue 索引值\r\n * @param data 更新的数据\r\n * @returns Promise对象，包含更新结果\r\n */\r\nasync function updateDataByIndex<T extends { [key: string]: any }>(\r\n  dbName: string,\r\n  tbName: string,\r\n  indexName: string,\r\n  indexValue: any,\r\n  data: Partial<T>\r\n): Promise<any> {\r\n  if (!dbName) {\r\n    return ResponseMessages.DBNAME_IS_NULL();\r\n  }\r\n  if (!indexName) {\r\n    return ResponseMessages.TB_SELECT_INDEX_NAME_IS_NULL();\r\n  }\r\n  if (!indexValue) {\r\n    return ResponseMessages.TB_SELECT_INDEX_VALUE_IS_NULL();\r\n  }\r\n\r\n  const tableExist = await isTableExist(dbName, tbName);\r\n  if (!tableExist) {\r\n    return ResponseMessages.TB_NOTFOUND();\r\n  }\r\n\r\n  try {\r\n    const db = await useDatabase(dbName);\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      const store = db.transaction([tbName], 'readwrite').objectStore(tbName);\r\n      const index = store.index(indexName);\r\n      const request = index.get(indexValue);\r\n\r\n      request.onsuccess = (event: Event) => {\r\n        const target = event.target as IDBRequest;\r\n        const item = target.result;\r\n        \r\n        if (item) {\r\n          const updatedItem = { ...item, ...data };\r\n          const updateRequest = store.put(updatedItem);\r\n\r\n          updateRequest.onsuccess = (event: Event) => {\r\n            resolve(ResponseMessages.TB_DATA_UPDATE_BY_INDEX_SUCCESS(event));\r\n          };\r\n\r\n          updateRequest.onerror = (event: Event) => {\r\n            reject(ResponseMessages.TB_DATA_UPDATE_BY_INDEX_ERROR(event));\r\n          };\r\n        } else {\r\n          reject(ResponseMessages.DATA_ERROR('找不到数据'));\r\n        }\r\n      };\r\n\r\n      request.onerror = (event: Event) => {\r\n        reject(ResponseMessages.TB_DATA_UPDATE_BY_INDEX_ERROR(event));\r\n      };\r\n    });\r\n  } catch (error) {\r\n    return ResponseMessages.BASIC_ERROR(error);\r\n  }\r\n}\r\n\r\nexport default updateDataByIndex;\r\n","import { useDatabase } from '../index'\r\nimport ResponseMessages from '../../constant'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface WhereClause {\r\n  field: string\r\n  operator: string\r\n  value: any\r\n}\r\n\r\ninterface OrderByClause {\r\n  field: string\r\n  direction: 'asc' | 'desc'\r\n}\r\n\r\ninterface QueryConfig {\r\n  select?: string[]\r\n  where?: Array<{\r\n    field: string\r\n    operator: string\r\n    value: any\r\n  }>\r\n  orderBy?: Array<{\r\n    field: string\r\n    direction: 'asc' | 'desc'\r\n  }>\r\n  limit?: number\r\n  offset?: number\r\n}\r\n\r\nexport class QueryBuilder {\r\n  private dbName: string\r\n  private tableName: string\r\n  private selectedFields: string[] = []\r\n  private whereConditions: WhereClause[] = []\r\n  private orderByClauses: OrderByClause[] = []\r\n  private limitValue?: number\r\n  private offsetValue?: number\r\n\r\n  constructor(dbName: string, tableName: string) {\r\n    this.dbName = dbName\r\n    this.tableName = tableName\r\n  }\r\n\r\n  // 链式查询方法\r\n  select(...fields: string[]) {\r\n    this.selectedFields = fields.length ? fields : ['*']\r\n    return this\r\n  }\r\n\r\n  where(field: string, operator: string, value: any) {\r\n    this.whereConditions.push({ field, operator, value })\r\n    return this\r\n  }\r\n\r\n  orderBy(field: string, direction: 'asc' | 'desc' = 'asc') {\r\n    this.orderByClauses.push({ field, direction })\r\n    return this\r\n  }\r\n\r\n  limit(value: number) {\r\n    this.limitValue = value\r\n    return this\r\n  }\r\n\r\n  offset(value: number) {\r\n    this.offsetValue = value\r\n    return this\r\n  }\r\n\r\n  // 配置查询方法\r\n  setConfig(config: QueryConfig) {\r\n    if (config.select) {\r\n      this.selectedFields = config.select\r\n    }\r\n    if (config.where) {\r\n      this.whereConditions = config.where\r\n    }\r\n    if (config.orderBy) {\r\n      this.orderByClauses = config.orderBy\r\n    }\r\n    if (config.limit !== undefined) {\r\n      this.limitValue = config.limit\r\n    }\r\n    if (config.offset !== undefined) {\r\n      this.offsetValue = config.offset\r\n    }\r\n    return this\r\n  }\r\n\r\n  // 执行查询\r\n  async execute(): Promise<any> {\r\n    try {\r\n      const db = await useDatabase(this.dbName)\r\n      const transaction = db.transaction([this.tableName], 'readonly')\r\n      const store = transaction.objectStore(this.tableName)\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const request = store.getAll()\r\n\r\n        request.onsuccess = () => {\r\n          try {\r\n            let results = request.result\r\n\r\n            // 应用where条件\r\n            if (this.whereConditions.length) {\r\n              results = this.applyWhereConditions(results)\r\n            }\r\n\r\n            // 应用orderBy\r\n            if (this.orderByClauses.length) {\r\n              results = this.applyOrderBy(results)\r\n            }\r\n\r\n            // 应用select\r\n            if (this.selectedFields.length && !this.selectedFields.includes('*')) {\r\n              results = results.map(item => {\r\n                const selected: any = {}\r\n                this.selectedFields.forEach(field => {\r\n                  if (field in item) {\r\n                    selected[field] = item[field]\r\n                  }\r\n                })\r\n                return selected\r\n              })\r\n            }\r\n\r\n            // 应用分页\r\n            if (this.offsetValue !== undefined) {\r\n              results = results.slice(this.offsetValue)\r\n            }\r\n            if (this.limitValue !== undefined) {\r\n              results = results.slice(0, this.limitValue)\r\n            }\r\n\r\n            resolve(ResponseMessages.TB_SELECT_SUCCESS(results))\r\n          } catch (error) {\r\n            reject(ResponseMessages.TB_SELECT_ERROR(error))\r\n          }\r\n        }\r\n\r\n        request.onerror = () => {\r\n          reject(ResponseMessages.TB_SELECT_ERROR(request.error))\r\n        }\r\n      })\r\n    } catch (error) {\r\n      logger.error('Query execution failed:', error)\r\n      return ResponseMessages.TB_SELECT_ERROR(error)\r\n    }\r\n  }\r\n\r\n  private applyWhereConditions(results: any[]): any[] {\r\n    return results.filter(item => {\r\n      return this.whereConditions.every(({ field, operator, value }) => {\r\n        const itemValue = item[field]\r\n        switch (operator) {\r\n          case '=':\r\n            return itemValue === value\r\n          case '!=':\r\n            return itemValue !== value\r\n          case '>':\r\n            return itemValue > value\r\n          case '>=':\r\n            return itemValue >= value\r\n          case '<':\r\n            return itemValue < value\r\n          case '<=':\r\n            return itemValue <= value\r\n          case 'between':\r\n            return itemValue >= value[0] && itemValue <= value[1]\r\n          case 'in':\r\n            return value.includes(itemValue)\r\n          case 'like':\r\n            if (typeof itemValue !== 'string') return false\r\n            const pattern = value.replace(/%/g, '.*')\r\n            return new RegExp(`^${pattern}$`).test(itemValue)\r\n          default:\r\n            return false\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  private applyOrderBy(results: any[]): any[] {\r\n    return [...results].sort((a, b) => {\r\n      for (const { field, direction } of this.orderByClauses) {\r\n        if (a[field] < b[field]) return direction === 'asc' ? -1 : 1\r\n        if (a[field] > b[field]) return direction === 'asc' ? 1 : -1\r\n      }\r\n      return 0\r\n    })\r\n  }\r\n} ","import { QueryBuilder } from './QueryBuilder'\r\n\r\n/**\r\n * 创建查询构建器\r\n * @description \r\n * 创建一个新的查询构建器实例，用于构建数据库查询。\r\n * 支持链式调用和配置对象两种方式。\r\n * \r\n * @param dbName 数据库名称\r\n * @param tableName 表名称\r\n * @returns QueryBuilder 实例\r\n * \r\n * @example\r\n * ```typescript\r\n * // 链式调用\r\n * const results = await createQuery('myDB', 'users')\r\n *   .select('name', 'email')\r\n *   .where('age', '>', 18)\r\n *   .orderBy('name', 'asc')\r\n *   .limit(10)\r\n *   .execute()\r\n * \r\n * // 配置对象方式\r\n * const results = await createQuery('myDB', 'users')\r\n *   .setConfig({\r\n *     select: ['name', 'email'],\r\n *     where: [{ field: 'age', operator: '>', value: 18 }],\r\n *     orderBy: [{ field: 'name', direction: 'asc' }],\r\n *     limit: 10\r\n *   })\r\n *   .execute()\r\n * ```\r\n */\r\nexport function createQuery(dbName: string, tableName: string): QueryBuilder {\r\n  return new QueryBuilder(dbName, tableName)\r\n}\r\n\r\n","import ResponseMessages from '../../constant'\r\nimport { useDatabase } from '../index'\r\nimport { logger } from '../../utils/logger'\r\nimport { isTableExist } from '../../helper'\r\nimport { createTable } from '../table'\r\n\r\ninterface SaveFileOptions {\r\n  generateThumbnail?: boolean  // 是否生成缩略图，仅对图片有效，默认 false\r\n  thumbnailSize?: number       // 缩略图尺寸，默认 100px\r\n  generateUrl?: boolean        // 是否生成URL，默认 true\r\n}\r\n\r\ninterface FileBaseInfo {\r\n  name: string           // 文件名\r\n  type: string           // 文件类型\r\n  size: number          // 文件大小\r\n  lastModified: number  // 最后修改时间\r\n  width?: number        // 图片宽度\r\n  height?: number       // 图片高度\r\n  fileShortId: string   // 文件短标识\r\n  downloadToken: string // 下载令牌\r\n  url?: string          // 文件URL\r\n  thumbnail?: string    // 缩略图\r\n  thumbnailUrl?: string // 缩略图URL\r\n  compressed?: boolean  // 是否已压缩\r\n  compressedSize?: number // 压缩后大小\r\n  processedAt: number   // 处理时间\r\n  processMethod?: string // 处理方法\r\n}\r\n\r\ninterface FileData {\r\n  id?: number                // 文件ID，自增主键\r\n  name: string              // 文件名，用于快速访问\r\n  url?: string              // 默认URL(原始文件URL)\r\n  rawFileInfo: FileBaseInfo & {\r\n    file: File              // 原始文件对象\r\n    blob?: Blob             // 原始Blob对象\r\n  }\r\n  handleFileInfo: FileBaseInfo & {\r\n    blob?: Blob             // 处理后的Blob对象\r\n  }\r\n}\r\n\r\n/**\r\n * 保存文件到数据库\r\n * @description 自动检查并创建数据库表，然后保存文件。支持图片缩略图、文件压缩等处理。\r\n */\r\nasync function saveFilesToDB(\r\n  dbName: string,\r\n  tableName: string,\r\n  file: File,\r\n  options: SaveFileOptions = {\r\n    generateUrl: true,\r\n    generateThumbnail: false,\r\n    thumbnailSize: 100\r\n  }\r\n): Promise<any> {\r\n  try {\r\n    // 参数验证\r\n    if (!dbName) return ResponseMessages.DBNAME_IS_NULL()\r\n    if (!tableName) return ResponseMessages.TBNAME_IS_NULL()\r\n    if (!file) return ResponseMessages.BASIC_ERROR('文件不能为空')\r\n\r\n    // 检查表是否存在，不存在则创建\r\n    const exists = await isTableExist(dbName, tableName)\r\n    if (!exists) {\r\n      await createTable(dbName, tableName, {\r\n        primaryKey: 'id',\r\n        autoIncrement: true,\r\n        indexes: ['name']\r\n      })\r\n    }\r\n\r\n    // 准备共享信息\r\n    const now = Date.now()\r\n    const fileShortId = generateFileShortId()\r\n    const downloadToken = generateDownloadToken()\r\n\r\n    // 准备基础文件信息\r\n    const baseInfo: FileBaseInfo = {\r\n      name: file.name,\r\n      type: file.type,\r\n      size: file.size,\r\n      lastModified: file.lastModified,\r\n      processedAt: now,\r\n      fileShortId,\r\n      downloadToken\r\n    }\r\n\r\n    // 如果需要生成URL\r\n    if (options.generateUrl) {\r\n      baseInfo.url = URL.createObjectURL(file)\r\n    }\r\n\r\n    // 准备文件数据结构\r\n    const fileData: FileData = {\r\n      name: file.name,\r\n      url: URL.createObjectURL(file),\r\n      rawFileInfo: {\r\n        ...baseInfo,\r\n        file,\r\n        blob: file,\r\n        url: URL.createObjectURL(file)\r\n      },\r\n      handleFileInfo: {\r\n        ...baseInfo,\r\n        url: URL.createObjectURL(file)\r\n      }\r\n    }\r\n\r\n    // 如果是图片，处理图片相关信息\r\n    if (file.type.startsWith('image/')) {\r\n      const dimensions = await getImageDimensions(file)\r\n      const imageInfo = {\r\n        width: dimensions.width,\r\n        height: dimensions.height\r\n      }\r\n      \r\n      Object.assign(fileData.rawFileInfo, imageInfo)\r\n      Object.assign(fileData.handleFileInfo, imageInfo)\r\n\r\n      // 生成缩略图\r\n      if (options.generateThumbnail) {\r\n        try {\r\n          // 生成原始缩略图\r\n          const rawThumbnail = await generateThumbnail(file, options.thumbnailSize || 100, false)\r\n          fileData.rawFileInfo.thumbnail = rawThumbnail.base64\r\n          fileData.rawFileInfo.thumbnailUrl = URL.createObjectURL(rawThumbnail.blob)\r\n\r\n          // 生成压缩的缩略图\r\n          const compressedThumbnail = await generateThumbnail(file, options.thumbnailSize || 100, true)\r\n          fileData.handleFileInfo.thumbnail = compressedThumbnail.base64\r\n          fileData.handleFileInfo.thumbnailUrl = URL.createObjectURL(compressedThumbnail.blob)\r\n          fileData.handleFileInfo.compressed = true\r\n          fileData.handleFileInfo.compressedSize = compressedThumbnail.blob.size\r\n          \r\n          fileData.rawFileInfo.processMethod = 'thumbnail'\r\n          fileData.handleFileInfo.processMethod = 'thumbnail+compress'\r\n        } catch (error) {\r\n          logger.warn('生成缩略图失败:', error)\r\n        }\r\n      }\r\n    }\r\n\r\n    // 获取数据库连接\r\n    const db = await useDatabase(dbName)\r\n    const transaction = db.transaction([tableName], 'readwrite')\r\n    const store = transaction.objectStore(tableName)\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const request = store.add(fileData)\r\n\r\n      request.onsuccess = () => {\r\n        logger.debug(`文件 ${file.name} 保存成功`)\r\n        resolve(ResponseMessages.FILE_SAVE_SUCCESS(request.result))\r\n      }\r\n\r\n      request.onerror = () => {\r\n        logger.error(`保存文件 ${file.name} 失败:`, request.error)\r\n        reject(ResponseMessages.FILE_SAVE_ERROR(request.error))\r\n      }\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('保存文件失败:', error)\r\n    return ResponseMessages.FILE_SAVE_ERROR(error)\r\n  }\r\n}\r\n\r\n// 获取图片尺寸\r\nasync function getImageDimensions(file: File): Promise<{ width: number; height: number }> {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image()\r\n    img.onload = () => resolve({ width: img.width, height: img.height })\r\n    img.onerror = reject\r\n    img.src = URL.createObjectURL(file)\r\n  })\r\n}\r\n\r\n// 生成文件短标识\r\nfunction generateFileShortId(): string {\r\n  return Math.random().toString(36).substring(2, 10)\r\n}\r\n\r\n// 生成下载令牌\r\nfunction generateDownloadToken(): string {\r\n  return Math.random().toString(36).substring(2, 15)\r\n}\r\n\r\n/**\r\n * 生成图片缩略图\r\n */\r\nasync function generateThumbnail(\r\n  file: File, \r\n  size: number, \r\n  compress = false\r\n): Promise<{ base64: string; blob: Blob }> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.onload = (e) => {\r\n      const img = new Image()\r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas')\r\n        const ctx = canvas.getContext('2d')\r\n        \r\n        const scale = size / Math.max(img.width, img.height)\r\n        canvas.width = img.width * scale\r\n        canvas.height = img.height * scale\r\n        \r\n        ctx?.drawImage(img, 0, 0, canvas.width, canvas.height)\r\n        \r\n        // 根据是否压缩使用不同的质量参数\r\n        const quality = compress ? 0.6 : 0.9\r\n        const base64 = canvas.toDataURL('image/jpeg', quality)\r\n        \r\n        // 转换为Blob\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              resolve({ base64, blob })\r\n            } else {\r\n              reject(new Error('Failed to create blob'))\r\n            }\r\n          },\r\n          'image/jpeg',\r\n          quality\r\n        )\r\n      }\r\n      img.onerror = reject\r\n      img.src = e.target?.result as string\r\n    }\r\n    reader.onerror = reject\r\n    reader.readAsDataURL(file)\r\n  })\r\n}\r\n\r\nexport default saveFilesToDB ","import ResponseMessages from '../../constant'\r\nimport { useDatabase } from '../index'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface GetFileOptions {\r\n  generateUrl?: boolean  // 是否生成新的URL，默认 true\r\n}\r\n\r\n/**\r\n * 从数据库获取文件\r\n * @description 根据ID获取文件信息，支持URL生成\r\n */\r\nasync function getFileFromDB(\r\n  dbName: string,\r\n  tableName: string,\r\n  fileId: number,\r\n  options: GetFileOptions = { generateUrl: true }\r\n): Promise<any> {\r\n  try {\r\n    if (!dbName) return ResponseMessages.DBNAME_IS_NULL()\r\n    if (!tableName) return ResponseMessages.TBNAME_IS_NULL()\r\n    if (!fileId) return ResponseMessages.BASIC_ERROR('文件ID不能为空')\r\n\r\n    const db = await useDatabase(dbName)\r\n    const transaction = db.transaction([tableName], 'readonly')\r\n    const store = transaction.objectStore(tableName)\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const request = store.get(fileId)\r\n\r\n      request.onsuccess = () => {\r\n        const fileData = request.result\r\n        if (!fileData) {\r\n          reject(ResponseMessages.BASIC_ERROR('文件不存在'))\r\n          return\r\n        }\r\n\r\n        // 如果需要生成新的URL\r\n        if (options.generateUrl) {\r\n          // 生成原始文件URL\r\n          if (fileData.rawFileInfo.file) {\r\n            fileData.url = URL.createObjectURL(fileData.rawFileInfo.file)\r\n            fileData.rawFileInfo.url = fileData.url\r\n          }\r\n\r\n          // 如果有缩略图，也生成缩略图URL\r\n          if (fileData.rawFileInfo.thumbnail) {\r\n            const rawBlob = dataURLtoBlob(fileData.rawFileInfo.thumbnail)\r\n            fileData.rawFileInfo.thumbnailUrl = URL.createObjectURL(rawBlob)\r\n          }\r\n          if (fileData.handleFileInfo.thumbnail) {\r\n            const handleBlob = dataURLtoBlob(fileData.handleFileInfo.thumbnail)\r\n            fileData.handleFileInfo.thumbnailUrl = URL.createObjectURL(handleBlob)\r\n          }\r\n        }\r\n\r\n        logger.debug(`获取文件 ${fileData.name} 成功`)\r\n        resolve(ResponseMessages.FILE_GET_SUCCESS(fileData))\r\n      }\r\n\r\n      request.onerror = () => {\r\n        logger.error('获取文件失败:', request.error)\r\n        reject(ResponseMessages.FILE_GET_ERROR(request.error))\r\n      }\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('获取文件失败:', error)\r\n    return ResponseMessages.FILE_GET_ERROR(error)\r\n  }\r\n}\r\n\r\n// base64转Blob\r\nfunction dataURLtoBlob(dataURL: string): Blob {\r\n  const arr = dataURL.split(',')\r\n  const mime = arr[0].match(/:(.*?);/)?.[1]\r\n  const bstr = atob(arr[1])\r\n  let n = bstr.length\r\n  const u8arr = new Uint8Array(n)\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n)\r\n  }\r\n  return new Blob([u8arr], { type: mime })\r\n}\r\n\r\nexport default getFileFromDB ","import ResponseMessages from '../../constant'\r\nimport { useDatabase } from '../index'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface GetAllFilesOptions {\r\n  generateUrl?: boolean  // 是否生成URL，默认 true\r\n  page?: number         // 页码，从1开始\r\n  pageSize?: number     // 每页数量\r\n}\r\n\r\n/**\r\n * 获取所有文件\r\n * @description 支持分页和URL生成\r\n */\r\nasync function getAllFiles(\r\n  dbName: string,\r\n  tableName: string,\r\n  options: GetAllFilesOptions = {\r\n    generateUrl: true,\r\n    page: 1,\r\n    pageSize: 10\r\n  }\r\n): Promise<any> {\r\n  try {\r\n    if (!dbName) return ResponseMessages.DBNAME_IS_NULL()\r\n    if (!tableName) return ResponseMessages.TBNAME_IS_NULL()\r\n\r\n    const db = await useDatabase(dbName)\r\n    const transaction = db.transaction([tableName], 'readonly')\r\n    const store = transaction.objectStore(tableName)\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const request = store.getAll()\r\n\r\n      request.onsuccess = () => {\r\n        let files = request.result\r\n\r\n        // 处理分页\r\n        if (options.page && options.pageSize) {\r\n          const start = (options.page - 1) * options.pageSize\r\n          const end = start + options.pageSize\r\n          files = files.slice(start, end)\r\n        }\r\n\r\n        // 处理文件数据\r\n        files = files.map(fileData => {\r\n          // 如果需要生成URL\r\n          if (options.generateUrl) {\r\n            // 生成原始文件URL\r\n            if (fileData.rawFileInfo.file) {\r\n              fileData.url = URL.createObjectURL(fileData.rawFileInfo.file)\r\n              fileData.rawFileInfo.url = fileData.url\r\n            }\r\n\r\n            // 如果有缩略图，生成缩略图URL\r\n            if (fileData.rawFileInfo.thumbnail) {\r\n              const rawBlob = dataURLtoBlob(fileData.rawFileInfo.thumbnail)\r\n              fileData.rawFileInfo.thumbnailUrl = URL.createObjectURL(rawBlob)\r\n            }\r\n            if (fileData.handleFileInfo.thumbnail) {\r\n              const handleBlob = dataURLtoBlob(fileData.handleFileInfo.thumbnail)\r\n              fileData.handleFileInfo.thumbnailUrl = URL.createObjectURL(handleBlob)\r\n            }\r\n          }\r\n\r\n          return fileData\r\n        })\r\n\r\n        logger.debug(`获取到 ${files.length} 个文件`)\r\n        resolve(ResponseMessages.FILE_GET_SUCCESS(files))\r\n      }\r\n\r\n      request.onerror = () => {\r\n        logger.error('获取文件列表失败:', request.error)\r\n        reject(ResponseMessages.FILE_GET_ERROR(request.error))\r\n      }\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('获取文件列表失败:', error)\r\n    return ResponseMessages.FILE_GET_ERROR(error)\r\n  }\r\n}\r\n\r\n// base64转Blob\r\nfunction dataURLtoBlob(dataURL: string): Blob {\r\n  const arr = dataURL.split(',')\r\n  const mime = arr[0].match(/:(.*?);/)?.[1]\r\n  const bstr = atob(arr[1])\r\n  let n = bstr.length\r\n  const u8arr = new Uint8Array(n)\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n)\r\n  }\r\n  return new Blob([u8arr], { type: mime })\r\n}\r\n\r\nexport default getAllFiles ","import ResponseMessages from '../../constant'\r\nimport getFileFromDB from './getFileFromDB'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface DownloadOptions {\r\n  type?: 'raw' | 'handled'  // 下载原始文件还是处理后的文件\r\n  fileName?: string        // 自定义文件名\r\n}\r\n\r\n/**\r\n * 下载单个文件\r\n * @description 从数据库获取并下载文件，支持原始文件和处理后的文件\r\n */\r\nasync function downloadFileFromDB(\r\n  dbName: string,\r\n  tableName: string,\r\n  fileId: number,\r\n  options: DownloadOptions = { type: 'raw' }\r\n): Promise<any> {\r\n  try {\r\n    // 获取文件数据\r\n    const result = await getFileFromDB(dbName, tableName, fileId)\r\n    // console.log(result);\r\n    \r\n    if (result.code !== 200) {\r\n      return result\r\n    }\r\n\r\n    const fileData = result.result\r\n    const fileInfo = options.type === 'handled' ? fileData.handleFileInfo : fileData.rawFileInfo\r\n    const file = fileInfo.file || fileInfo.blob\r\n\r\n    // console.log(file);\r\n    \r\n    if (!file) {\r\n      return ResponseMessages.FILE_GET_ERROR('文件数据不存在')\r\n    }\r\n\r\n    // 创建下载链接\r\n    const url = URL.createObjectURL(file)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = options.fileName || fileInfo.name\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    document.body.removeChild(a)\r\n    URL.revokeObjectURL(url)\r\n\r\n    logger.debug(`文件 ${fileInfo.name} 下载成功`)\r\n    return ResponseMessages.FILE_GET_SUCCESS(fileData)\r\n\r\n  } catch (error) {\r\n    logger.error('下载文件失败:', error)\r\n    return ResponseMessages.FILE_GET_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default downloadFileFromDB ","import ResponseMessages from '../../constant'\r\nimport getAllFiles from './getAllFiles'\r\nimport { logger } from '../../utils/logger'\r\nimport JSZip from 'jszip'\r\n\r\ninterface DownloadAllOptions {\r\n  type?: 'raw' | 'handled'  // 下载原始文件还是处理后的文件\r\n  zipName?: string         // 打包下载时的压缩包名称\r\n}\r\n\r\n/**\r\n * 批量下载文件\r\n * @description 支持打包下载多个文件，可选择原始文件或处理后的文件\r\n */\r\nasync function downloadAllFiles(\r\n  dbName: string,\r\n  tableName: string,\r\n  options: DownloadAllOptions = { type: 'raw' }\r\n): Promise<any> {\r\n  try {\r\n    // 获取所有文件\r\n    const result = await getAllFiles(dbName, tableName)\r\n    \r\n    if (result.code !== 200) {\r\n      return result\r\n    }\r\n\r\n    const files = result.result\r\n    if (!files.length) {\r\n      return ResponseMessages.BASIC_ERROR('没有可下载的文件')\r\n    }\r\n\r\n    // 如果只有一个文件，直接下载\r\n    if (files.length === 1) {\r\n      const fileInfo = options.type === 'handled' ? files[0].handleFileInfo : files[0].rawFileInfo\r\n      const file = fileInfo.file || fileInfo.blob\r\n\r\n      if (!file) {\r\n        return ResponseMessages.FILE_GET_ERROR('文件数据不存在')\r\n      }\r\n\r\n      const url = URL.createObjectURL(file)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = fileInfo.name\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      document.body.removeChild(a)\r\n      URL.revokeObjectURL(url)\r\n\r\n      logger.debug(`文件 ${fileInfo.name} 下载成功`)\r\n      return ResponseMessages.FILE_GET_SUCCESS(files[0])\r\n    }\r\n\r\n    // 多个文件，使用 JSZip 打包下载\r\n    const zip = new JSZip()\r\n\r\n    files.forEach((fileData: any) => {\r\n      const fileInfo = options.type === 'handled' ? fileData.handleFileInfo : fileData.rawFileInfo\r\n      const file = fileInfo.file || fileInfo.blob\r\n      if (file) {\r\n        zip.file(fileInfo.name, file)\r\n      }\r\n    })\r\n\r\n    const zipBlob = await zip.generateAsync({ type: 'blob' })\r\n    const url = URL.createObjectURL(zipBlob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = options.zipName || `files_${Date.now()}.zip`\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    document.body.removeChild(a)\r\n    URL.revokeObjectURL(url)\r\n\r\n    logger.debug(`${files.length} 个文件打包下载成功`)\r\n    return ResponseMessages.FILE_GET_SUCCESS(files)\r\n\r\n  } catch (error) {\r\n    logger.error('批量下载文件失败:', error)\r\n    return ResponseMessages.FILE_GET_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default downloadAllFiles ","/**\r\n * 释放文件URL，避免内存泄漏\r\n * @param url 文件URL\r\n */\r\nfunction revokeFileUrl(url: string): void {\r\n  if (url.startsWith('blob:') || url.startsWith('data:')) {\r\n    URL.revokeObjectURL(url)\r\n  }\r\n}\r\n\r\nexport default revokeFileUrl ","/**\r\n * 生成文件短标识\r\n */\r\nexport function generateFileShortId(): string {\r\n  const timestamp = Date.now().toString(36)\r\n  const random = Math.random().toString(36).substring(2, 8)\r\n  return `${timestamp}-${random}`\r\n}\r\n\r\n/**\r\n * 创建文件下载令牌\r\n */\r\nexport async function createFileDownloadToken(\r\n  file: File,\r\n  customName?: string\r\n): Promise<string> {\r\n  const fileData = await file.arrayBuffer()\r\n  const hash = await crypto.subtle.digest('SHA-256', fileData)\r\n  const hashArray = Array.from(new Uint8Array(hash))\r\n  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\r\n  \r\n  return `${hashHex}_${customName || file.name}`\r\n} ","import ResponseMessages from '../../constant'\r\nimport { useDatabase, createTable, getTableNames } from '../index'\r\nimport { logger } from '../../utils/logger'\r\nimport { findDBData } from '../index'\r\n\r\ninterface MigrationOptions {\r\n  overwrite?: boolean\r\n  transform?: (data: any) => any\r\n  onProgress?: (progress: MigrationProgress) => void\r\n}\r\n\r\ninterface MigrationProgress {\r\n  phase: 'reading' | 'writing'\r\n  current: number\r\n  total: number\r\n  percentage: number\r\n  message: string\r\n}\r\n\r\nasync function migrateData(\r\n  fromDB: string,\r\n  toDB: string,\r\n  options: MigrationOptions = {}\r\n): Promise<any> {\r\n  try {\r\n    // 1. 获取源数据库的所有数据\r\n    const sourceData = await findDBData(fromDB)\r\n    console.log('源数据:', sourceData)\r\n\r\n    if (!sourceData || !Array.isArray(sourceData)) {\r\n      return ResponseMessages.TB_MIGRATE_ERROR('源数据库为空')\r\n    }\r\n\r\n    // 2. 获取所有表名和版本信息\r\n    const tables = sourceData.map(table => ({\r\n      name: table.tableName,\r\n      version: table.version || 1\r\n    }))\r\n\r\n    if (!tables.length) {\r\n      return ResponseMessages.TB_MIGRATE_ERROR('源数据库没有表')\r\n    }\r\n\r\n    // 3. 获取目标数据库的已有表\r\n    const existingTablesResult = await getTableNames(toDB)\r\n    const existingTables = existingTablesResult?.result || []\r\n\r\n    // 4. 只为不存在的表创建表结构\r\n    const tablesToCreate = tables.filter(table => !existingTables.includes(table.name))\r\n    if (tablesToCreate.length > 0) {\r\n      logger.debug(`需要创建 ${tablesToCreate.length} 个表`)\r\n      for (const table of tablesToCreate) {\r\n        await createTable(toDB, table.name, { version: table.version })\r\n        logger.debug(`表 ${table.name} 创建成功`)\r\n      }\r\n    }\r\n\r\n    // 5. 获取数据库连接\r\n    const targetDB = await useDatabase(toDB)\r\n\r\n    // 6. 遍历每个表进行数据迁移\r\n    let totalRecords = 0\r\n    for (const table of sourceData) {\r\n      try {\r\n        const tableName = table.tableName\r\n\r\n        // 读取阶段\r\n        if (options.onProgress) {\r\n          options.onProgress({\r\n            phase: 'reading',\r\n            current: sourceData.indexOf(table),\r\n            total: sourceData.length,\r\n            percentage: Math.round((sourceData.indexOf(table) / sourceData.length) * 100),\r\n            message: `正在读取表 ${tableName} 的数据`\r\n          })\r\n        }\r\n\r\n        let tableData = table.children?.result || []\r\n        if (!Array.isArray(tableData)) {\r\n          logger.warn(`表 ${tableName} 的数据不是数组，跳过`)\r\n          continue\r\n        }\r\n\r\n        // 数据转换\r\n        if (options.transform) {\r\n          tableData = options.transform(tableData)\r\n        }\r\n\r\n        // 写入阶段\r\n        if (options.onProgress) {\r\n          options.onProgress({\r\n            phase: 'writing',\r\n            current: sourceData.indexOf(table),\r\n            total: sourceData.length,\r\n            percentage: Math.round((sourceData.indexOf(table) / sourceData.length) * 100),\r\n            message: `正在写入表 ${tableName} 的数据`\r\n          })\r\n        }\r\n\r\n        const transaction = targetDB.transaction(tableName, 'readwrite')\r\n        const store = transaction.objectStore(tableName)\r\n\r\n        // 如果需要覆盖，先清空目标表\r\n        if (options.overwrite) {\r\n          await new Promise((resolve, reject) => {\r\n            const request = store.clear()\r\n            request.onsuccess = () => resolve(undefined)\r\n            request.onerror = () => reject(request.error)\r\n          })\r\n        }\r\n\r\n        // 批量写入数据\r\n        await Promise.all(tableData.map((item: any) => {\r\n          return new Promise((resolve, reject) => {\r\n            const request = store.add(item)\r\n            request.onsuccess = () => resolve(undefined)\r\n            request.onerror = () => reject(request.error)\r\n          })\r\n        }))\r\n\r\n        totalRecords += tableData.length\r\n        logger.debug(`表 ${tableName} 迁移完成，共迁移 ${tableData.length} 条记录`)\r\n\r\n      } catch (error) {\r\n        logger.error(`迁移表 ${table.tableName} 失败:`, error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    // 7. 关闭目标数据库连接\r\n    targetDB.close()\r\n\r\n    const result = {\r\n      fromDB,\r\n      toDB,\r\n      tables: tables.map(t => t.name),\r\n      totalRecords\r\n    }\r\n\r\n    logger.debug('数据迁移成功:', result)\r\n    return ResponseMessages.TB_MIGRATE_SUCCESS(result)\r\n\r\n  } catch (error) {\r\n    logger.error('数据迁移失败:', error)\r\n    return ResponseMessages.TB_MIGRATE_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default migrateData ","import ResponseMessages from '../../constant'\r\nimport { findDBData } from '../index'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface ExportOptions {\r\n  pretty?: boolean      // 是否美化输出\r\n  download?: boolean    // 是否下载文件\r\n  fileName?: string     // 下载的文件名\r\n}\r\n\r\nasync function exportToJson(dbName: string, options: ExportOptions = {}): Promise<any> {\r\n  try {\r\n    const { \r\n      pretty = false, \r\n      download = true,\r\n      fileName = `${dbName}_export.json` \r\n    } = options\r\n\r\n    // 使用 findDBData 获取所有数据\r\n      const sourceData = await findDBData(dbName)\r\n      console.log(sourceData);\r\n      \r\n    if (!sourceData || !Array.isArray(sourceData)) {\r\n      return ResponseMessages.JSON_EXPORT_ERROR('数据库为空')\r\n    }\r\n\r\n    // 构建导出数据\r\n    const exportData = {\r\n      database: dbName,\r\n      exportedAt: new Date().toISOString(),\r\n      tables: sourceData.map(table => table.tableName),\r\n      data: sourceData.reduce((acc, table) => {\r\n        acc[table.tableName] = table.children?.result || []\r\n        return acc\r\n      }, {} as Record<string, any[]>)\r\n    }\r\n\r\n    // 转换为JSON\r\n    const jsonString = pretty \r\n      ? JSON.stringify(exportData, null, 2)\r\n      : JSON.stringify(exportData)\r\n\r\n    // 如果需要下载\r\n    if (download) {\r\n      const blob = new Blob([jsonString], { type: 'application/json' })\r\n      const url = URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = fileName\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      document.body.removeChild(a)\r\n      URL.revokeObjectURL(url)\r\n    }\r\n\r\n    return ResponseMessages.JSON_EXPORT_SUCCESS({\r\n      data: jsonString,\r\n      tables: exportData.tables,\r\n      totalTables: exportData.tables.length,\r\n      fileName: download ? fileName : undefined\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('导出JSON失败:', error)\r\n    return ResponseMessages.JSON_EXPORT_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default exportToJson ","import ResponseMessages from '../../constant'\r\nimport { useDatabase, createTable } from '../index'\r\nimport { logger } from '../../utils/logger'\r\n\r\ninterface ImportProgress {\r\n  phase: 'preparing' | 'importing'\r\n  current: number\r\n  total: number\r\n  percentage: number\r\n  message: string\r\n}\r\n\r\ninterface ImportOptions {\r\n  overwrite?: boolean\r\n  onProgress?: (progress: ImportProgress) => void\r\n}\r\n\r\nasync function importFromJson(\r\n  dbName: string,\r\n  jsonData: string,\r\n  options: ImportOptions = {}\r\n): Promise<any> {\r\n  try {\r\n    const { overwrite = false, onProgress } = options\r\n\r\n    // 解析JSON数据\r\n    const importData = JSON.parse(jsonData)\r\n    const { tables, data } = importData\r\n\r\n    if (!tables || !data) {\r\n      throw new Error('无效的JSON数据格式')\r\n    }\r\n\r\n    // 获取数据库连接\r\n    const db = await useDatabase(dbName)\r\n\r\n    let totalRecords = 0\r\n    for (const [tableName, tableData] of Object.entries(data)) {\r\n      try {\r\n        // 进度通知 - 准备阶段\r\n        if (onProgress) {\r\n          onProgress({\r\n            phase: 'preparing',\r\n            current: tables.indexOf(tableName),\r\n            total: tables.length,\r\n            percentage: Math.round((tables.indexOf(tableName) / tables.length) * 100),\r\n            message: `正在准备导入表 ${tableName}`\r\n          })\r\n        }\r\n\r\n        // 确保表存在\r\n        if (!db.objectStoreNames.contains(tableName)) {\r\n          await createTable(dbName, tableName)\r\n        }\r\n\r\n        const transaction = db.transaction(tableName, 'readwrite')\r\n        const store = transaction.objectStore(tableName)\r\n\r\n        // 如果需要覆盖，先清空表\r\n        if (overwrite) {\r\n          await new Promise((resolve, reject) => {\r\n            const request = store.clear()\r\n            request.onsuccess = () => resolve(undefined)\r\n            request.onerror = () => reject(request.error)\r\n          })\r\n        }\r\n\r\n        // 导入数据\r\n        if (Array.isArray(tableData)) {\r\n          await Promise.all(tableData.map((item: any) => {\r\n            return new Promise((resolve, reject) => {\r\n              const request = store.add(item)\r\n              request.onsuccess = () => resolve(undefined)\r\n              request.onerror = () => reject(request.error)\r\n            })\r\n          }))\r\n\r\n          totalRecords += tableData.length\r\n        }\r\n\r\n        // 进度通知 - 导入阶段\r\n        if (onProgress) {\r\n          onProgress({\r\n            phase: 'importing',\r\n            current: tables.indexOf(tableName) + 1,\r\n            total: tables.length,\r\n            percentage: Math.round(((tables.indexOf(tableName) + 1) / tables.length) * 100),\r\n            message: `表 ${tableName} 导入完成`\r\n          })\r\n        }\r\n\r\n      } catch (error) {\r\n        logger.error(`导入表 ${tableName} 失败:`, error)\r\n        throw error\r\n      }\r\n    }\r\n\r\n    return ResponseMessages.JSON_IMPORT_SUCCESS({\r\n      tables,\r\n      totalRecords\r\n    })\r\n\r\n  } catch (error) {\r\n    logger.error('导入JSON失败:', error)\r\n    return ResponseMessages.JSON_IMPORT_ERROR(error)\r\n  }\r\n}\r\n\r\nexport default importFromJson ","// 从 core/index.ts 导入所有核心功能\r\nexport {\r\n  useDatabase,\r\n  deleteTable,\r\n  deleteDatabase,\r\n  deleteAllDatabases,\r\n  closeAllConnections,\r\n  getTableNames,\r\n  deleteAllTables,\r\n  // 表操作\r\n  createTable,\r\n  insertOne,\r\n  insertMany,\r\n  findDBData,\r\n  findByKey,\r\n  findByIndex,\r\n  deleteOneByPk,\r\n  deleteOneByIndex,\r\n  deleteManyByPK,\r\n  deleteManyByIndex,\r\n  updateDataByPrimaryKey,\r\n  updateDataByIndex\r\n} from './core'\r\n\r\n// 从 core/query 导入查询功能\r\nexport {  createQuery } from './core/query/createQuery'\r\n\r\n// 从 core/file 导入文件操作\r\nexport {\r\n  saveFilesToDB,\r\n  getFileFromDB,\r\n  getAllFiles,\r\n  downloadFileFromDB,\r\n  downloadAllFiles,\r\n  revokeFileUrl\r\n} from './core/file'\r\n\r\n// 从 core/file/utils 导入文件工具函数\r\nexport {\r\n  generateFileShortId,\r\n  createFileDownloadToken\r\n} from './core/file/utils'\r\n\r\n// 从 core/migration 导入数据迁移功能\r\nexport { default as migrateData } from './core/migration/migrateData'\r\n\r\n// 从 core/json 导入 JSON 导入导出功能\r\nexport { default as exportToJson } from './core/json/exportToJson'\r\nexport { default as importFromJson } from './core/json/importFromJson' "],"names":["returnFormater","closeAllConnections","deleteAllTables","createTable","insertOne","insertMany","findDBData","findByKey","findByIndex","deleteOneByPk","deleteOneByIndex","deleteManyByPK","deleteManyByIndex","updateDataByPrimaryKey","updateDataByIndex","dataURLtoBlob","generateFileShortId"],"mappings":"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"}